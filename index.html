<html>
  <head>
    <title>Knitplot</title>

    <link href="css/reset.css" media="all" rel="stylesheet" type="text/css" />
    <link href="css/codemirror.css" media="all" rel="stylesheet" type="text/css" />
    <link href="css/solarized.css" media="all" rel="stylesheet" type="text/css" />
    <link href="css/ui-lightness/jquery-ui-1.8.21.custom.css" rel="stylesheet" type="text/css" />
    <link href="css/knitplot.css" media="all" rel="stylesheet" type="text/css" />

    <script src="js/codemirror.js"></script>
    <script src="js/codemirror-mode.js"></script>
    <script src="js/underscore-1.3.3.js"></script>
    <script src="js/jquery-1.7.2.js"></script>
    <script src="js/jquery.dotimeout.js"></script>
    <script src="js/jquery-ui-1.8.21.custom.min.js"></script>
    <script src="js/raphael-2.1.0.js"></script>
    <script src="js/backbone-0.9.9.js"></script>
    <script src="js/parse-1.1.15.js"></script>
    <script src="js/knitplot.js"></script>

  </head>
  <body>
    <div id="topbar">
      <div id="logo">
        <h1><a href="#">KnitPlot</a></h1>
        <h2>A tool for knitters.</h2>
      </div>
      <div id="user"></div>
    </div>
    <table>
      <tbody>
        <tr>
          <td>
            <div id="leftbar">Content</div>
          </td>
          <td style="width: 100%">
            <div id="main">
              <div id="notification"></div>
              <div id="app"></div>
            </div>
          </td>
          <td>
            <div id="rightbar">Content</div>
          </td>
        </tr>
      </tbody>
    </table>

    <script type="text/template" id="confirmation-template">
      <div id="confirmation-dialog">
        <div id="confirmation-message"><%= message %></div><br/>
        <div id="dialog-button-bar">
          <button id="no">No</button>
          <button id="yes">Yes</button>
        </div>
      </div>
    </script>

    <script type="text/template" id="login-template">
      <div id="login-dialog">
        <table>
          <tr>
            <td>
              <label for="email">Email: </label>
            </td><td>
              <input id="email" name="email" type="text"></input><br/>
            </tr>
          </tr>
          <tr>
            <td>
              <label for="password">Password: </label>
            </td><td>
              <input id="password" name="password" type="password"></input><br/>
            </tr>
          </tr>
          <tr>
            <td colspan="2">
              <div id="dialog-button-bar">
                <button id="cancel">Cancel :(</button>
                <button id="login">Log In!</button>
              </div>
            </tr>
          </tr>
        </table>
      </div>
    </script>

    <script type="text/template" id="signup-template">
      <div id="signup-dialog">
        <table>
          <tr>
            <td>
              <label for="email">Email: </label>
            </td><td>
              <input id="email" name="email" type="text"></input><br/>
            </tr>
          </tr>
          <tr>
            <td>
              <label for="password">Password: </label>
            </td><td>
              <input id="password" name="password" type="password"></input><br/>
            </tr>
          </tr>
          <tr>
            <td colspan="2">
              <div id="dialog-button-bar">
                <button id="cancel">Cancel :(</button>
                <button id="signup">Sign Up!</button>
              </div>
            </tr>
          </tr>
        </table>
      </div>
    </script>

    <script type="text/template" id="need-to-sign-up-template">
      <div id="need-to-sign-up-dialog">
        <table>
          <tr>
            <td>
              You need to sign up or log in to save your chart.
              Look in the upper right corner.
            </td>
          </tr>
          <tr>
            <td>
              <div id="dialog-button-bar">
                <button id="okay">Okay</button>
              </div>
            </td>
          </tr>
      </div>
    </script>

    <script type="text/template" id="logged-in-template">
      <div id="username" name="username"><%= username %></div>
    </script>

    <script type="text/template" id="logged-out-template">
      <div id="signup" name="signup">Sign Up</div>
      <div id="login" name="login">Log In</div>
    </script>

    <script type="text/template" id="chart-template">
      <form>
        <table>
          <tr>
            <td style="vertical-align: middle">
              <label for="title">Title: </label>
              <input id="title" name="title" type="text"></input>
            </td>
            <td style="vertical-align: middle; text-align: right">
              <button id="svg">Open&nbsp;SVG</button>
              <button id="save"><%= model.isNew() ? "Create" : "Save" %></button>
            </td>
          </tr>
          <tr>
            <td rowspan=2>
              <center><div id="chart" name="chart"></div></center>
            </td>
            <td>
              <textarea id="text" name="text" rows=25 cols=35></textarea>
            </td>
          </tr>
          <tr>
            <td>
              <div id="errors" class="ui-state-error"></div>
            </td>
          </tr>
        </table>
        <div style="clear:both"/>
      </form>
    </script>

    <script type="text/template" id="chart-list-template">
      <button id="new">New Pattern</button>
      <ul>
        <% _.each(collection, function(item) { %>
          <li><a href="#chart/<%= item.id %>"><%= item.escape('title') %></a></li>
        <% }); %>
      </ul>
      <% if (start > 0) { %>
        <a href="#charts/<%= previous %>">Previous</a>
      <% } %>
      <% if (start > 0 && next > 0) { %>
        |
      <% } %>
      <% if (next > 0) { %>
        <a href="#charts/<%= next %>">Next</a>
      <% } %>
    </script>

    <script type="text/template" id="svg-preview-template">
      <div id="svg-preview-dialog">
        <table>
          <tr>
            <td rowspan=2>
              <iframe id="svg-preview-iframe" src="<%= url %>"></iframe>
            </td>
            <td>
              &nbsp;<br/>
              Right-click <a href="<%= url %>">here</a> and choose "Save Link As...".<br/>
              &nbsp;<br/>
              If you're using a trackpad, it's usually 2-finger click.<br/>
              &nbsp;<br/>
              Or you can hold down "control" while you click.<br/>
              &nbsp;<br/>
            </td>
          </tr>
          <tr>
            <td>
              <div id="dialog-button-bar">
                <button id="okay">Okay</button>
              </div>
            </td>
          </tr>
      </div>
    </script>

    <script type="text/javascript">
      $(function() { knitplot.init(); });
    </script>
  </body>
</html>
